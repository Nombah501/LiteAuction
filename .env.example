# -----------------------------------------------------------------------------
# Core runtime (required)
# -----------------------------------------------------------------------------
BOT_TOKEN=replace_me
BOT_USERNAME=Auction501_bot
DATABASE_URL=postgresql+asyncpg://auction:auction@db:5432/auction
REDIS_URL=redis://redis:6379/0
TZ=Asia/Tashkent
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Admin and moderation access
# -----------------------------------------------------------------------------
# Comma-separated Telegram user IDs with full admin access.
ADMIN_USER_IDS=
# Comma-separated Telegram user IDs with operator access in web admin.
ADMIN_OPERATOR_USER_IDS=

# Moderation queue destination (forum topics in a single moderation chat).
MODERATION_CHAT_ID=
MODERATION_THREAD_ID=
MODERATION_TOPIC_COMPLAINTS_ID=
MODERATION_TOPIC_SUGGESTIONS_ID=
MODERATION_TOPIC_BUGS_ID=
MODERATION_TOPIC_GUARANTORS_ID=
MODERATION_TOPIC_APPEALS_ID=
MODERATION_TOPIC_AUCTIONS_ACTIVE_ID=
MODERATION_TOPIC_AUCTIONS_FROZEN_ID=
MODERATION_TOPIC_AUCTIONS_CLOSED_ID=

# -----------------------------------------------------------------------------
# Web admin auth/security
# -----------------------------------------------------------------------------
ADMIN_PANEL_TOKEN=
ADMIN_WEB_SESSION_SECRET=
ADMIN_WEB_AUTH_MAX_AGE_SECONDS=86400
ADMIN_WEB_COOKIE_SECURE=false
ADMIN_WEB_CSRF_TTL_SECONDS=7200

# -----------------------------------------------------------------------------
# Optional Bot API custom emoji IDs (button icons)
# -----------------------------------------------------------------------------
UI_EMOJI_CREATE_AUCTION_ID=
UI_EMOJI_PUBLISH_ID=
UI_EMOJI_BID_ID=
UI_EMOJI_BUYOUT_ID=
UI_EMOJI_REPORT_ID=
UI_EMOJI_MOD_PANEL_ID=

# -----------------------------------------------------------------------------
# Auction and anti-spam behavior
# -----------------------------------------------------------------------------
ANTI_SNIPER_WINDOW_MINUTES=2
ANTI_SNIPER_EXTEND_MINUTES=3
ANTI_SNIPER_MAX_EXTENSIONS=3
BID_COOLDOWN_SECONDS=2
DUPLICATE_BID_WINDOW_SECONDS=15
CONFIRMATION_TTL_SECONDS=5
COMPLAINT_COOLDOWN_SECONDS=60
AUCTION_WATCHER_INTERVAL_SECONDS=5

# -----------------------------------------------------------------------------
# Onboarding soft-gate
# SOFT_GATE_MODE: strict | grace | off
# -----------------------------------------------------------------------------
SOFT_GATE_REQUIRE_PRIVATE_START=true
SOFT_GATE_MODE=grace
SOFT_GATE_HINT_INTERVAL_HOURS=24

# -----------------------------------------------------------------------------
# Fraud heuristics tuning
# -----------------------------------------------------------------------------
FRAUD_ALERT_THRESHOLD=60
FRAUD_RAPID_WINDOW_SECONDS=120
FRAUD_RAPID_MIN_BIDS=5
FRAUD_DOMINANCE_WINDOW_SECONDS=300
FRAUD_DOMINANCE_MIN_TOTAL_BIDS=8
FRAUD_DOMINANCE_RATIO=0.7
FRAUD_DUOPOLY_WINDOW_SECONDS=300
FRAUD_DUOPOLY_MIN_TOTAL_BIDS=10
FRAUD_DUOPOLY_PAIR_RATIO=0.85
FRAUD_ALTERNATING_RECENT_BIDS=8
FRAUD_ALTERNATING_MIN_SWITCHES=6
FRAUD_BASELINE_WINDOW_SECONDS=3600
FRAUD_BASELINE_MIN_BIDS=6
FRAUD_BASELINE_SPIKE_FACTOR=4.0
FRAUD_BASELINE_MIN_INCREMENT=50
FRAUD_BASELINE_SPIKE_SCORE=25
FRAUD_HISTORICAL_COMPLETED_AUCTIONS=30
FRAUD_HISTORICAL_MIN_POINTS=25
FRAUD_HISTORICAL_SPIKE_FACTOR=3.0
FRAUD_HISTORICAL_MIN_INCREMENT=40
FRAUD_HISTORICAL_SPIKE_SCORE=20
FRAUD_HISTORICAL_START_RATIO_LOW=0.5
FRAUD_HISTORICAL_START_RATIO_HIGH=2.0

# -----------------------------------------------------------------------------
# Feedback intake and rewards
# -----------------------------------------------------------------------------
FEEDBACK_INTAKE_MIN_LENGTH=10
FEEDBACK_INTAKE_COOLDOWN_SECONDS=90
FEEDBACK_BUG_REWARD_POINTS=30
FEEDBACK_SUGGESTION_REWARD_POINTS=20
FEEDBACK_PRIORITY_BOOST_ENABLED=true
FEEDBACK_PRIORITY_BOOST_COST_POINTS=25
FEEDBACK_PRIORITY_BOOST_DAILY_LIMIT=2
FEEDBACK_PRIORITY_BOOST_COOLDOWN_SECONDS=0
POINTS_REDEMPTION_ENABLED=true
POINTS_REDEMPTION_COOLDOWN_SECONDS=60
POINTS_REDEMPTION_DAILY_LIMIT=0
POINTS_REDEMPTION_WEEKLY_LIMIT=0
POINTS_REDEMPTION_DAILY_SPEND_CAP=0
POINTS_REDEMPTION_WEEKLY_SPEND_CAP=0
POINTS_REDEMPTION_MIN_BALANCE=0
POINTS_REDEMPTION_MIN_ACCOUNT_AGE_SECONDS=0
POINTS_REDEMPTION_MIN_EARNED_POINTS=0
APPEAL_PRIORITY_BOOST_ENABLED=true
APPEAL_PRIORITY_BOOST_COST_POINTS=20
APPEAL_PRIORITY_BOOST_DAILY_LIMIT=1
APPEAL_PRIORITY_BOOST_COOLDOWN_SECONDS=0

# -----------------------------------------------------------------------------
# Guarantor intake
# -----------------------------------------------------------------------------
GUARANTOR_INTAKE_MIN_LENGTH=10
GUARANTOR_INTAKE_COOLDOWN_SECONDS=180
GUARANTOR_PRIORITY_BOOST_ENABLED=true
GUARANTOR_PRIORITY_BOOST_COST_POINTS=40
GUARANTOR_PRIORITY_BOOST_DAILY_LIMIT=1
GUARANTOR_PRIORITY_BOOST_COOLDOWN_SECONDS=0

# -----------------------------------------------------------------------------
# Feedback -> GitHub issue automation (outbox worker)
# Enable only when GITHUB_TOKEN is configured.
# -----------------------------------------------------------------------------
GITHUB_AUTOMATION_ENABLED=false
GITHUB_TOKEN=
GITHUB_REPO_OWNER=Nombah501
GITHUB_REPO_NAME=LiteAuction
OUTBOX_WATCHER_INTERVAL_SECONDS=20
OUTBOX_BATCH_SIZE=20
OUTBOX_MAX_ATTEMPTS=5
OUTBOX_RETRY_BASE_SECONDS=30
OUTBOX_RETRY_MAX_SECONDS=1800
# Service user for moderation audit logs on successful issue creation.
FEEDBACK_GITHUB_ACTOR_TG_USER_ID=-998

# -----------------------------------------------------------------------------
# Docker Compose database bootstrap
# -----------------------------------------------------------------------------
POSTGRES_DB=auction
POSTGRES_USER=auction
POSTGRES_PASSWORD=auction
